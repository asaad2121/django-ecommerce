{% extends 'product/base.html' %}
{% load static %}
{% block body %}  
	{% include "partials/_messages.html" %}
	<link href="{% static 'css/search.css' %}" rel="stylesheet">     
	<div class="search-box" >
		<form method="GET">
			<h1 class="flex-container" style="padding-top: 10%; padding-bottom:5%;"> Search Products </h1>
			<div><input class="form-control" id="q" name="q" type="text" placeholder="Search..." aria-label="Search" style="font-size: 16px; color: #43383e; line-height: 1.2; position: relative; display: block; height: 50px; background: #fff; border-radius: 35px;">
			</input></div>
		</form>
	</div>
	{% if json %}
		<center>
			<h1 style="font-family:'Rockwell'">
				{% if count == 1 %}
					Found 1 product
				{% else %}
					Found {{ count }} products
				{% endif %}
			</h1>
		</center><br>
		<div class="row justify-content-md-center">
			<div class="col-3" style="padding-left: 1%">
				{% include 'partials/_sidebar_product.html' %}
			</div>
			<div class="col-8">
				<div class="row row-cols-1 row-cols-md-2 g-3">
					{% for product in products %}
						<div class="col">
							<div class="card border-dark h-100">
								<a href="/product/{{ product.slug }}">
								<img src="{{product.thumbnail}}" height="300px" class="card-img-top" alt="Cant Load Image"></a>
								<div class="card-body">
									<h5 class="card-title">{{product.name}}</h5>
									<h6 class="card-title">{{product.category.category_name}}</h6>
									<p class="card-text">{{product.description | truncatechars:100 }}</p>
									<h6 class="card-title">Price: ₹{{product.price}}</h6>
									<a class="btn btn-success" style="margin-right: 15%;margin-left: 7%" href="/product/{{ product.slug }}" >View More</a>
									<button data-product="{{ product.id }}" data-action="add" class="btn btn-primary update-cart" style="margin-left: 15%;margin-right: 7%" >Add to Cart</button>
								</div> 
							</div>
						</div>
					{% endfor %}
				</div>
			</div>
		 </div>
	{% else %}
	<div class="row justify-content-md-center">
		<div class="col-3" style="padding-left: 1%">
			{% include 'partials/_sidebar_product.html' %}
		</div>
		<div class="col-8">
			<div class="row row-cols-1 row-cols-md-2 g-3">
				{% for product in products %}
					<div class="col">
						<div class="card border-dark h-100">
							<a href={{product.get_absolute_url}}>
							<img src="{{ product.thumbnail.url }}" height="300px" class="card-img-top" alt="Cant Load Image"></img></a>
							<div class="card-body">
								<h5 class="card-title">{{product.name}}</h5>
								<h6 class="card-title">{{product.category.category_name}}</h6>
								<!-- Company: {{product.company.company_name}} -->
								<p class="card-text">{{product.description | truncatechars:100 }}</p>
								<h6 class="card-title">Price: ₹{{product.price}}</h6>
								<br/>
								<a class="btn btn-success" style="margin-right: 15%;margin-left: 7%" href={{product.get_absolute_url}} >View More</a>
								<button data-product="{{ product.id }}" data-action="add" class="btn btn-primary update-cart" Z style="margin-left: 15%;margin-right: 7%" >Add to Cart</button>
								<div>
									<label for="select">Qty</label>
									<select id="select" class="h6 store-select-dropdown">
									  <option value="1">1</option>
									  <option value="2">2</option>
									  <option value="3">3</option>
									  <option value="4">4</option>
									</select>
								  </div>
							</div> 
						</div>
					</div>
				{% endfor %}
			</div>
			{% endif %}
		</div>
	</div>

{% endblock %}